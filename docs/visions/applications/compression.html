

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Data Compression &mdash; visions 0.2.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Data Discovery and Data Integration" href="integration.html" />
    <link rel="prev" title="Data Summarization" href="summarizer.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> visions
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Visions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/concepts.html">Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../practitioner.html">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/extending.html">Extending</a></li>
</ul>
<p class="caption"><span class="caption-text">Applications</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="applications.html">Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="summarizer.html">Data Summarization</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Data Compression</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#example">Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dataset">Dataset</a></li>
<li class="toctree-l2"><a class="reference internal" href="#baseline">Baseline</a></li>
<li class="toctree-l2"><a class="reference internal" href="#type-compression">Type compression</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#within-types">Within types</a></li>
<li class="toctree-l3"><a class="reference internal" href="#between-types">Between types</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#verifying-the-typeset">Verifying the typeset</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#type-inference-report">Type Inference Report</a></li>
<li class="toctree-l3"><a class="reference internal" href="#relation-graph-plot">Relation graph plot</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#results">Results</a></li>
<li class="toctree-l2"><a class="reference internal" href="#outlook">Outlook</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="integration.html">Data Discovery and Data Integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="validation.html">Data Validation</a></li>
<li class="toctree-l1"><a class="reference internal" href="machine_learning.html">Machine Learning</a></li>
</ul>
<p class="caption"><span class="caption-text">Contribution</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../contributing/contributing.html">Community contributions</a></li>
</ul>
<p class="caption"><span class="caption-text">Background</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../background/goals.html">Goals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../background/motivation.html">Open challenges</a></li>
<li class="toctree-l1"><a class="reference internal" href="../background/data_type_view.html">Data Type View</a></li>
<li class="toctree-l1"><a class="reference internal" href="../background/engineering_view.html">Design decisions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../background/nested_set_view.html">Nested set view</a></li>
<li class="toctree-l1"><a class="reference internal" href="../background/graph_view.html">Graph view</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about.html">About</a></li>
</ul>
<p class="caption"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api.html">API</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">visions</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
      <li>Data Compression</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/visions/applications/compression.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="data-compression">
<h1>Data Compression<a class="headerlink" href="#data-compression" title="Permalink to this headline">¶</a></h1>
<p>Decoupling <em>semantic</em> data types from <em>physical</em> data types makes it easier to compress variables.
For this example we restrict ourselves to in-memory compression.
Our task is to automatically obtain an efficient in-memory representation, to minimize the RAM used, while preserving the same semantic type.</p>
<p>A typical task is data compression, where the user seeks to minimize memory utilization of the <em>physical</em> type while preserving the <em>semantic</em> type of their data.
We consider a dataset with one variable consisting of “Yes” and “No” values.
As the variable has only two distinct values, the <em>physical</em> storage needed can be optimally stored as a bool using only one byte per value as opposed to a pandas object using approximately 66 bytes.
There are infinite potential ways to denote “Yes” and “No” values within a dataset, consequently, we cannot rely on a static rule-based system for inference in general purpose software.
However, that does not mean that this is “just data munging” and we cannot do this and other tasks more effectively.
We observe that some patterns occur more often (“Yes”, “No” over “Arr” or “Nay”) and there are other indicators that can help a system to decide what to do (the variable two distinct values).
We note that a rule-based system that trivially encodes each variable with two distinct values as boolean is no solution, as the encoding loses part of it’s meaning (e.g. encoding “Male”, “Female”).</p>
<p>Two characteristics of the types provide us space to compress:</p>
<ul class="simple">
<li><p>Semantic types restrict the possible values of a variable (the URL type is a subset of String).</p></li>
<li><p>The type system infers the exact semantic type independent of physical subtype (int64 and int32 are both Count)</p></li>
</ul>
<div class="section" id="example">
<h2>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h2>
<p>The following example demonstrates how in-memory compression works on a real-life dataset using <cite>visions</cite>.
The full code for the example can be found <a class="reference external" href="../../../examples/compression_proof_of_concept/">here</a>.</p>
</div>
<div class="section" id="dataset">
<h2>Dataset<a class="headerlink" href="#dataset" title="Permalink to this headline">¶</a></h2>
<p>The data is taken from the RDW (the Dutch DMV) through the <a class="reference external" href="https://github.com/dylan-profiler/say-hello">say-hello</a> package.
It records all (registered) vehicles in the Netherlands.
The file is provided as .csv with a file size of 7.1 GB.
The set has 64 variables including booleans, integers, urls and dates.
The data is messy, as we can expect from real-world data.
There are missing values, variable types are not standardized etc.
For a more elaborate description of the dataset, we refer the reader to it <a class="reference external" href="https://github.com/pandas-profiling/pandas-profiling">pandas-profiling</a> report which can be found: <a class="reference external" href="http://github.com/dylan-profiler/say-hello/">here</a>.</p>
</div>
<div class="section" id="baseline">
<h2>Baseline<a class="headerlink" href="#baseline" title="Permalink to this headline">¶</a></h2>
<p>Any meaningful compression of the data should have a lower RAM usage.
To be able to compare, we measure the usage of the DataFrame without any preprocessing.
We are also interested in how the compression scales with the number of rows.</p>
<div class="figure align-center" id="id14">
<a class="reference internal image-reference" href="../../_images/file_sizes.png"><img alt="Memory usage for the RDW Vehicles data set" src="../../_images/file_sizes.png" style="width: 700px;" /></a>
<p class="caption"><span class="caption-text">Memory usage for the RDW Vehicles data set</span><a class="headerlink" href="#id14" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="type-compression">
<h2>Type compression<a class="headerlink" href="#type-compression" title="Permalink to this headline">¶</a></h2>
<div class="section" id="within-types">
<h3>Within types<a class="headerlink" href="#within-types" title="Permalink to this headline">¶</a></h3>
<p>Examples: integer, categorical/string</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>We could take a similar approach for float and complex.</p>
</div>
<p>Plot to determine when to encode categorical values as string and when as categorical.</p>
<div class="figure align-center" id="id15">
<a class="reference internal image-reference" href="../../_images/category_string_memory.png"><img alt="String and Categorical storage trade-off" src="../../_images/category_string_memory.png" style="width: 700px;" /></a>
<p class="caption"><span class="caption-text">pandas string and categorical memory size as function of percentage of unique values.</span><a class="headerlink" href="#id15" title="Permalink to this image">¶</a></p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The integer, float and complex in-type compressions are based on narrowing conversions <a class="footnote-reference brackets" href="#id13" id="id2">6</a>.
This is useful is the current dataframe is not updated, but you risk losing information when appending new data</p>
</div>
</div>
<div class="section" id="between-types">
<h3>Between types<a class="headerlink" href="#between-types" title="Permalink to this headline">¶</a></h3>
<p>Examples: float-&gt;int</p>
</div>
</div>
<div class="section" id="verifying-the-typeset">
<h2>Verifying the typeset<a class="headerlink" href="#verifying-the-typeset" title="Permalink to this headline">¶</a></h2>
<p><cite>visions</cite> provides us with tools to verify whether our typeset behaves as intended.</p>
<div class="section" id="type-inference-report">
<h3>Type Inference Report<a class="headerlink" href="#type-inference-report" title="Permalink to this headline">¶</a></h3>
<p>The <cite>type_inference_report_frame</cite> reports the changes before and after type inference given a typeset.
This report is useful for catching various errors, for example that all types are visions_generic or that string columns containing dates have not changed.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">visions.core.functional</span> <span class="kn">import</span> <span class="n">type_inference_report_frame</span>
<span class="n">report</span> <span class="o">=</span> <span class="n">type_inference_report_frame</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">rdw_typeset</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">report</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Maximum</span> <span class="n">ondersteunende</span> <span class="n">snelheid</span>                        <span class="n">visions_float</span>                  <span class="o">!=</span> <span class="n">visions_integer</span>
<span class="n">Cilinderinhoud</span>                                         <span class="n">visions_float</span>                  <span class="o">!=</span> <span class="n">visions_integer</span>
<span class="n">Plaats</span> <span class="n">chassisnummer</span>                                   <span class="n">visions_string</span>                 <span class="o">!=</span> <span class="n">visions_categorical</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
<span class="n">Typegoedkeuringsnummer</span>                                 <span class="n">visions_string</span>                 <span class="o">==</span> <span class="n">visions_string</span>
<span class="n">Vermogen</span> <span class="n">massarijklaar</span>                                 <span class="n">visions_float</span>                  <span class="o">==</span> <span class="n">visions_float</span>
<span class="n">Merk</span>                                                   <span class="n">visions_string</span>                 <span class="o">!=</span> <span class="n">visions_categorical</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
<span class="n">Openstaande</span> <span class="n">terugroepactie</span> <span class="n">indicator</span>                   <span class="n">visions_string</span>                 <span class="o">!=</span> <span class="n">visions_categorical</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
<span class="n">Afstand</span> <span class="n">hart</span> <span class="n">koppeling</span> <span class="n">tot</span> <span class="n">achterzijde</span> <span class="n">voertuig</span>        <span class="n">visions_float</span>                  <span class="o">!=</span> <span class="n">visions_integer</span>
<span class="n">Handelsbenaming</span>                                        <span class="n">visions_string</span>                 <span class="o">==</span> <span class="n">visions_string</span>
<span class="n">Inrichting</span>                                             <span class="n">visions_string</span>                 <span class="o">!=</span> <span class="n">visions_categorical</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
<span class="n">API</span> <span class="n">Gekentekende_voertuigen_voertuigklasse</span>             <span class="n">visions_string</span>                 <span class="o">!=</span> <span class="n">visions_categorical</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
<span class="n">Aanhangwagen</span> <span class="n">autonoom</span> <span class="n">geremd</span>                           <span class="n">visions_float</span>                  <span class="o">!=</span> <span class="n">visions_integer</span>
<span class="n">Massa</span> <span class="n">rijklaar</span>                                         <span class="n">visions_float</span>                  <span class="o">!=</span> <span class="n">visions_integer</span>
<span class="n">Aantal</span> <span class="n">cilinders</span>                                       <span class="n">visions_float</span>                  <span class="o">!=</span> <span class="n">visions_integer</span>
<span class="n">Eerste</span> <span class="n">kleur</span>                                           <span class="n">visions_string</span>                 <span class="o">!=</span> <span class="n">visions_categorical</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
<span class="n">Datum</span> <span class="n">eerste</span> <span class="n">afgifte</span> <span class="n">Nederland</span>                         <span class="n">visions_integer</span><span class="p">[</span><span class="n">with_datetime</span><span class="p">]</span> <span class="o">!=</span> <span class="n">visions_date</span>
<span class="n">Aantal</span> <span class="n">deuren</span>                                          <span class="n">visions_float</span>                  <span class="o">!=</span> <span class="n">visions_integer</span>
<span class="n">API</span> <span class="n">Gekentekende_voertuigen_carrosserie</span>                <span class="n">visions_string</span>                 <span class="o">!=</span> <span class="n">visions_categorical</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
<span class="n">Kenteken</span>                                               <span class="n">visions_string</span>                 <span class="o">==</span> <span class="n">visions_string</span>
<span class="n">Aantal</span> <span class="n">wielen</span>                                          <span class="n">visions_float</span>                  <span class="o">!=</span> <span class="n">visions_integer</span>
<span class="n">Taxi</span> <span class="n">indicator</span>                                         <span class="n">visions_string</span>                 <span class="o">!=</span> <span class="n">visions_categorical</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
<span class="n">Europese</span> <span class="n">voertuigcategorie</span> <span class="n">toevoeging</span>                  <span class="n">visions_string</span>                 <span class="o">!=</span> <span class="n">visions_categorical</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
<span class="n">Massa</span> <span class="n">ledig</span> <span class="n">voertuig</span>                                   <span class="n">visions_float</span>                  <span class="o">!=</span> <span class="n">visions_integer</span>
<span class="n">Maximale</span> <span class="n">constructiesnelheid</span> <span class="p">(</span><span class="n">brom</span><span class="o">/</span><span class="n">snorfiets</span><span class="p">)</span>          <span class="n">visions_float</span>                  <span class="o">!=</span> <span class="n">visions_integer</span>
<span class="n">Lengte</span>                                                 <span class="n">visions_float</span>                  <span class="o">!=</span> <span class="n">visions_integer</span>
<span class="n">Type</span>                                                   <span class="n">visions_string</span>                 <span class="o">!=</span> <span class="n">visions_categorical</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
<span class="n">Maximum</span> <span class="n">massa</span> <span class="n">samenstelling</span>                            <span class="n">visions_float</span>                  <span class="o">!=</span> <span class="n">visions_integer</span>
<span class="n">Toegestane</span> <span class="n">maximum</span> <span class="n">massa</span> <span class="n">voertuig</span>                      <span class="n">visions_float</span>                  <span class="o">!=</span> <span class="n">visions_integer</span>
<span class="n">Voertuigsoort</span>                                          <span class="n">visions_string</span>                 <span class="o">!=</span> <span class="n">visions_categorical</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
<span class="n">WAM</span> <span class="n">verzekerd</span>                                          <span class="n">visions_string</span>                 <span class="o">!=</span> <span class="n">visions_categorical</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
<span class="n">Catalogusprijs</span>                                         <span class="n">visions_float</span>                  <span class="o">!=</span> <span class="n">visions_integer</span>
<span class="n">API</span> <span class="n">Gekentekende_voertuigen_brandstof</span>                  <span class="n">visions_string</span>                 <span class="o">!=</span> <span class="n">visions_categorical</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
<span class="n">Maximum</span> <span class="n">trekken</span> <span class="n">massa</span> <span class="n">geremd</span>                           <span class="n">visions_float</span>                  <span class="o">!=</span> <span class="n">visions_integer</span>
<span class="n">Aantal</span> <span class="n">rolstoelplaatsen</span>                                <span class="n">visions_float</span>                  <span class="o">!=</span> <span class="n">visions_bool</span><span class="p">[</span><span class="n">nl</span><span class="p">]</span>
<span class="n">Europese</span> <span class="n">voertuigcategorie</span>                             <span class="n">visions_string</span>                 <span class="o">!=</span> <span class="n">visions_categorical</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
<span class="n">Type</span> <span class="n">gasinstallatie</span>                                    <span class="n">visions_string</span>                 <span class="o">!=</span> <span class="n">visions_categorical</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
<span class="n">Aantal</span> <span class="n">zitplaatsen</span>                                     <span class="n">visions_float</span>                  <span class="o">!=</span> <span class="n">visions_integer</span>
<span class="n">Aantal</span> <span class="n">staanplaatsen</span>                                   <span class="n">visions_float</span>                  <span class="o">==</span> <span class="n">visions_float</span>
<span class="n">Breedte</span>                                                <span class="n">visions_float</span>                  <span class="o">!=</span> <span class="n">visions_integer</span>
<span class="n">API</span> <span class="n">Gekentekende_voertuigen_assen</span>                      <span class="n">visions_string</span>                 <span class="o">!=</span> <span class="n">visions_categorical</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
<span class="n">Datum</span> <span class="n">eerste</span> <span class="n">toelating</span>                                 <span class="n">visions_integer</span><span class="p">[</span><span class="n">with_datetime</span><span class="p">]</span> <span class="o">!=</span> <span class="n">visions_date</span>
<span class="n">Datum</span> <span class="n">tenaamstelling</span>                                   <span class="n">visions_integer</span><span class="p">[</span><span class="n">with_datetime</span><span class="p">]</span> <span class="o">!=</span> <span class="n">visions_date</span>
<span class="n">Oplegger</span> <span class="n">geremd</span>                                        <span class="n">visions_float</span>                  <span class="o">!=</span> <span class="n">visions_integer</span>
<span class="n">Bruto</span> <span class="n">BPM</span>                                              <span class="n">visions_float</span>                  <span class="o">!=</span> <span class="n">visions_integer</span>
<span class="n">Vervaldatum</span> <span class="n">tachograaf</span>                                 <span class="n">visions_float</span>                  <span class="o">!=</span> <span class="n">visions_integer</span>
<span class="n">Afwijkende</span> <span class="n">maximum</span> <span class="n">snelheid</span>                            <span class="n">visions_float</span>                  <span class="o">==</span> <span class="n">visions_float</span>
<span class="n">Uitvoering</span>                                             <span class="n">visions_string</span>                 <span class="o">==</span> <span class="n">visions_string</span>
<span class="n">Europese</span> <span class="n">uitvoeringcategorie</span> <span class="n">toevoeging</span>                <span class="n">visions_string</span>                 <span class="o">!=</span> <span class="n">visions_categorical</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
<span class="n">Export</span> <span class="n">indicator</span>                                       <span class="n">visions_string</span>                 <span class="o">!=</span> <span class="n">visions_categorical</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
<span class="n">Variant</span>                                                <span class="n">visions_string</span>                 <span class="o">==</span> <span class="n">visions_string</span>
<span class="n">Aanhangwagen</span> <span class="n">middenas</span> <span class="n">geremd</span>                           <span class="n">visions_float</span>                  <span class="o">!=</span> <span class="n">visions_integer</span>
<span class="n">Vervaldatum</span> <span class="n">APK</span>                                        <span class="n">visions_float</span>                  <span class="o">!=</span> <span class="n">visions_integer</span>
<span class="n">Wielbasis</span>                                              <span class="n">visions_float</span>                  <span class="o">!=</span> <span class="n">visions_integer</span>
<span class="n">Wacht</span> <span class="n">op</span> <span class="n">keuren</span>                                        <span class="n">visions_string</span>                 <span class="o">!=</span> <span class="n">visions_categorical</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
<span class="n">Vermogen</span> <span class="p">(</span><span class="n">brom</span><span class="o">/</span><span class="n">snorfiets</span><span class="p">)</span>                              <span class="n">visions_float</span>                  <span class="o">==</span> <span class="n">visions_float</span>
<span class="n">API</span> <span class="n">Gekentekende_voertuigen_carrosserie_specifiek</span>      <span class="n">visions_string</span>                 <span class="o">!=</span> <span class="n">visions_categorical</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
<span class="n">Zuinigheidslabel</span>                                       <span class="n">visions_string</span>                 <span class="o">!=</span> <span class="n">visions_categorical</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
<span class="n">Technische</span> <span class="nb">max</span><span class="o">.</span> <span class="n">massa</span> <span class="n">voertuig</span>                         <span class="n">visions_float</span>                  <span class="o">!=</span> <span class="n">visions_integer</span>
<span class="n">Volgnummer</span> <span class="n">wijziging</span> <span class="n">EU</span> <span class="n">typegoedkeuring</span>                <span class="n">visions_float</span>                  <span class="o">!=</span> <span class="n">visions_integer</span>
<span class="n">Maximum</span> <span class="n">massa</span> <span class="n">trekken</span> <span class="n">ongeremd</span>                         <span class="n">visions_float</span>                  <span class="o">!=</span> <span class="n">visions_integer</span>
<span class="n">Laadvermogen</span>                                           <span class="n">visions_float</span>                  <span class="o">!=</span> <span class="n">visions_integer</span>
<span class="n">Tweede</span> <span class="n">kleur</span>                                           <span class="n">visions_string</span>                 <span class="o">!=</span> <span class="n">visions_categorical</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
<span class="n">Retrofit</span> <span class="n">roetfilter</span>                                    <span class="n">visions_string</span>                 <span class="o">!=</span> <span class="n">visions_categorical</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
<span class="n">Afstand</span> <span class="n">voorzijde</span> <span class="n">voertuig</span> <span class="n">tot</span> <span class="n">hart</span> <span class="n">koppeling</span>          <span class="n">visions_float</span>                  <span class="o">!=</span> <span class="n">visions_integer</span>
<span class="n">In</span> <span class="n">total</span> <span class="mi">55</span> <span class="n">out</span> <span class="n">of</span> <span class="mi">64</span> <span class="n">types</span> <span class="n">were</span> <span class="n">changed</span><span class="o">.</span>
</pre></div>
</div>
</div>
<div class="section" id="relation-graph-plot">
<h3>Relation graph plot<a class="headerlink" href="#relation-graph-plot" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">rdw_typeset</span><span class="o">.</span><span class="n">output_graph</span><span class="p">(</span><span class="s2">&quot;rdw_typeset.svg&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="figure align-center">
<a class="reference internal image-reference" href="../../_images/rdw_typeset.svg"><img alt="RDW Typeset Relations" src="../../_images/rdw_typeset.svg" width="700px" /></a>
</div>
</div>
</div>
<div class="section" id="results">
<h2>Results<a class="headerlink" href="#results" title="Permalink to this headline">¶</a></h2>
<div class="figure align-center" id="id16">
<a class="reference internal image-reference" href="../../_images/file_sizes.png"><img alt="File sizes per file type (RDW Vehicles data set)" src="../../_images/file_sizes.png" style="width: 700px;" /></a>
<p class="caption"><span class="caption-text">File sizes per file type (RDW Vehicles data set) in memory.</span><a class="headerlink" href="#id16" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id17">
<a class="reference internal image-reference" href="../../_images/sizes_bar.png"><img alt="File sizes per file type (RDW Vehicles data set)" src="../../_images/sizes_bar.png" style="width: 700px;" /></a>
<p class="caption"><span class="caption-text">File sizes per file type (RDW Vehicles data set) in memory.</span><a class="headerlink" href="#id17" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="outlook">
<h2>Outlook<a class="headerlink" href="#outlook" title="Permalink to this headline">¶</a></h2>
<p>This post demonstrated how we can compress data in memory.
Future work should investigate to what extent we can compress data on disk further with popular file formats.
The challenge here is to define efficient mappings between semantic types and the logical types in the file formats.
The implementation of this mapping also depends on the storage engine, for example different engines for hdf5 have different ways of dealing with storing non-standard types <a class="footnote-reference brackets" href="#id11" id="id3">4</a>, <a class="footnote-reference brackets" href="#id12" id="id4">5</a>.</p>
<div class="figure align-center" id="id18">
<a class="reference internal image-reference" href="../../_images/file_sizes_uncompressed.png"><img alt="File sizes per file type (RDW Vehicles data set)" src="../../_images/file_sizes_uncompressed.png" style="width: 700px;" /></a>
<p class="caption"><span class="caption-text">File sizes per file type (RDW Vehicles data set) on disk.</span><a class="headerlink" href="#id18" title="Permalink to this image">¶</a></p>
</div>
<p>Interesting work on mapping a semantic type (ip-address) to physical storage (two 64-bit numpy arrays for IPv6) has been done by Tom Augspurger <a class="footnote-reference brackets" href="#id8" id="id5">1</a>, <a class="footnote-reference brackets" href="#id9" id="id6">2</a>, <a class="footnote-reference brackets" href="#id10" id="id7">3</a>.</p>
<dl class="footnote brackets">
<dt class="label" id="id8"><span class="brackets"><a class="fn-backref" href="#id5">1</a></span></dt>
<dd><p>Tom Augspurger, Extension Arrays for Pandas, 12 February 2018, <a class="reference external" href="https://tomaugspurger.github.io/pandas-extension-arrays.html">https://tomaugspurger.github.io/pandas-extension-arrays.html</a></p>
</dd>
<dt class="label" id="id9"><span class="brackets"><a class="fn-backref" href="#id6">2</a></span></dt>
<dd><p>Tom Augspurger, CyberPandas: Extending Pandas with Richer Types, 16 May 2018, <a class="reference external" href="https://www.anaconda.com/cyberpandas-extending-pandas-with-richer-types/">https://www.anaconda.com/cyberpandas-extending-pandas-with-richer-types/</a></p>
</dd>
<dt class="label" id="id10"><span class="brackets"><a class="fn-backref" href="#id7">3</a></span></dt>
<dd><p>Tom Augspurger, Cyberpandas package on Github, <a class="reference external" href="https://github.com/ContinuumIO/cyberpandas">https://github.com/ContinuumIO/cyberpandas</a></p>
</dd>
<dt class="label" id="id11"><span class="brackets"><a class="fn-backref" href="#id3">4</a></span></dt>
<dd><p>Special types: Storing other types as opaque data <a class="reference external" href="http://docs.h5py.org/en/latest/special.html#storing-other-types-as-opaque-data">http://docs.h5py.org/en/latest/special.html#storing-other-types-as-opaque-data</a></p>
</dd>
<dt class="label" id="id12"><span class="brackets"><a class="fn-backref" href="#id4">5</a></span></dt>
<dd><p>Using your own custom data types <a class="reference external" href="https://www.pytables.org/cookbook/custom_data_types.html">https://www.pytables.org/cookbook/custom_data_types.html</a></p>
</dd>
<dt class="label" id="id13"><span class="brackets"><a class="fn-backref" href="#id2">6</a></span></dt>
<dd><p>Lecture 1: Types, Expressions, &amp; Variables <a class="reference external" href="http://www.cs.cornell.edu/courses/cs1133/2014fa/lectures/09-08-14/presentation-01.pdf">http://www.cs.cornell.edu/courses/cs1133/2014fa/lectures/09-08-14/presentation-01.pdf</a></p>
</dd>
</dl>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="integration.html" class="btn btn-neutral float-right" title="Data Discovery and Data Integration" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="summarizer.html" class="btn btn-neutral float-left" title="Data Summarization" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Ian Eaves and Simon Brugman

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>